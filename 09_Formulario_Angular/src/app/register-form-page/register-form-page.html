<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Formulario de Registro</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css"
    />
  </head>
  <body class="bg-light">
    <div class="container py-5">
      <div class="row justify-content-center">
        <div class="col-md-8 col-lg-6">
          <div class="card">
            <div class="card-body p-4 p-md-5">
              <main class="form-signin w-100 m-auto">
                <form [formGroup]="loginFormGroup" (ngSubmit)="onSubmit()">
                  <div class="text-center mb-4">
                    <img
                      class="mb-4"
                      src="https://getbootstrap.com/docs/5.3/assets/brand/bootstrap-logo.svg"
                      alt="Logo"
                      width="72"
                      height="57"
                    />
                    <h1 class="h3 mb-3 fw-normal">Crear cuenta</h1>
                    <p class="text-muted">Complete el formulario para registrarse</p>
                  </div>

                  <div class="form-floating mb-3">
                    <input
                      type="text"
                      class="form-control"
                      [class.is-invalid]="loginFormGroup.get('nombreFormControl')?.invalid && loginFormGroup.get('nombreFormControl')?.touched"
                      id="floatingNombre"
                      placeholder="Roberto"
                      formControlName="nombreFormControl"
                    />
                    <label for="floatingNombre">Nombre</label>
                    @if (loginFormGroup.get('nombreFormControl')?.touched) {
                      <div class="invalid-feedback">
                        {{ getNombreErrors() }}
                      </div>
                    }
                  </div>

                  <div class="form-floating mb-3">
                    <input
                      type="text"
                      class="form-control"
                      [class.is-invalid]="loginFormGroup.get('apellidosFormControl')?.invalid && loginFormGroup.get('apellidosFormControl')?.touched"
                      id="floatingApellidos"
                      placeholder="Montañés Ramos"
                      formControlName="apellidosFormControl"
                    />
                    <label for="floatingApellidos">Apellidos</label>
                    @if (loginFormGroup.get('apellidosFormControl')?.touched) {
                      <div class="invalid-feedback">
                        {{ getApellidosErrors() }}
                      </div>
                    }
                  </div>

                  <div class="form-floating mb-3">
                    <input
                      type="text"
                      class="form-control"
                      [class.is-invalid]="loginFormGroup.get('nifFormControl')?.invalid && loginFormGroup.get('nifFormControl')?.touched"
                      id="floatingNif"
                      placeholder="6546546987A"
                      formControlName="nifFormControl"
                    />
                    <label for="floatingNif">NIF</label>
                    @if (loginFormGroup.get('nifFormControl')?.touched) {
                      <div class="invalid-feedback">
                        {{ getNifErrors() }}
                      </div>
                    }
                  </div>

                  <div class="form-floating mb-3">
                    <input
                      type="email"
                      class="form-control"
                      [class.is-invalid]="loginFormGroup.get('emailFormControl')?.invalid && loginFormGroup.get('emailFormControl')?.touched"
                      id="floatingEmail"
                      placeholder="name@example.com"
                      formControlName="emailFormControl"
                    />
                    <label for="floatingEmail">Email address</label>
                    @if (loginFormGroup.get('emailFormControl')?.touched) {
                      <div class="invalid-feedback">
                        {{ getEmailErrors() }}
                      </div>
                    }
                  </div>

                  <div class="form-floating mb-3">
                    <input
                      type="tel"
                      class="form-control"
                      [class.is-invalid]="loginFormGroup.get('telefonoFormControl')?.invalid && loginFormGroup.get('telefonoFormControl')?.touched"
                      id="floatingTelefono"
                      placeholder="637914785"
                      formControlName="telefonoFormControl"
                    />
                    <label for="floatingTelefono">Teléfono</label>
                    @if (loginFormGroup.get('telefonoFormControl')?.touched) {
                      <div class="invalid-feedback">
                        {{ getTelefonoErrors() }}
                      </div>
                    }
                  </div>

                  <div class="form-floating mb-3">
                    <select
                      class="form-control"
                      [class.is-invalid]="loginFormGroup.get('sexoFormControl')?.invalid && loginFormGroup.get('sexoFormControl')?.touched"
                      id="floatingSexo"
                      formControlName="sexoFormControl"
                    >
                      <option value="">Seleccione una opción</option>
                      <option value="Hombre">Hombre</option>
                      <option value="Mujer">Mujer</option>
                      <option value="Otro">Otro</option>
                      <option value="Prefiero no decirlo">Prefiero no decirlo</option>
                    </select>
                    <label for="floatingSexo">Sexo</label>
                    @if (loginFormGroup.get('sexoFormControl')?.touched && loginFormGroup.get('sexoFormControl')?.errors?.['required']) {
                      <div class="invalid-feedback">
                        El sexo es obligatorio
                      </div>
                    }
                  </div>

                  <div class="form-floating mb-3">
                    <select
                      class="form-control"
                      [class.is-invalid]="loginFormGroup.get('paginaEncontradaFormControl')?.invalid && loginFormGroup.get('paginaEncontradaFormControl')?.touched"
                      id="floatingPaginaEncontrada"
                      formControlName="paginaEncontradaFormControl"
                    >
                      <option value="">Seleccione una opción</option>
                      <option value="Google">Google</option>
                      <option value="Redes Sociales">Redes Sociales</option>
                      <option value="Recomendación">Recomendación</option>
                      <option value="Publicidad">Publicidad</option>
                      <option value="Otro">Otro</option>
                    </select>
                    <label for="floatingPaginaEncontrada">¿Cómo nos conociste?</label>
                    @if (loginFormGroup.get('paginaEncontradaFormControl')?.touched && loginFormGroup.get('paginaEncontradaFormControl')?.errors?.['required']) {
                      <div class="invalid-feedback">
                        Este campo es obligatorio
                      </div>
                    }
                  </div>

                  <div class="form-floating mb-3">
                    <input
                      type="password"
                      class="form-control"
                      [class.is-invalid]="loginFormGroup.get('passwordFormControl')?.invalid && loginFormGroup.get('passwordFormControl')?.touched"
                      id="floatingPassword"
                      placeholder="Password"
                      formControlName="passwordFormControl"
                    />
                    <label for="floatingPassword">Contraseña</label>
                    @if (loginFormGroup.get('passwordFormControl')?.touched) {
                      <div class="invalid-feedback">
                        {{ getPasswordErrors() }}
                      </div>
                    }
                  </div>

                  <div class="form-floating mb-3">
                    <input
                      type="password"
                      class="form-control"
                      [class.is-invalid]="(loginFormGroup.get('confirmPasswordFormControl')?.invalid || loginFormGroup.errors?.['passwordMismatch']) && loginFormGroup.get('confirmPasswordFormControl')?.touched"
                      id="floatingConfirmPassword"
                      placeholder="Password"
                      formControlName="confirmPasswordFormControl"
                    />
                    <label for="floatingConfirmPassword">Repetir Contraseña</label>
                    @if (loginFormGroup.get('confirmPasswordFormControl')?.touched) {
                      <div class="invalid-feedback">
                        {{ getConfirmPasswordErrors() }}
                      </div>
                    }
                  </div>

                  <div class="row g-2 mb-3">
                    <div class="col-md-6">
                      <button 
                        class="btn btn-outline-secondary w-100 py-2" 
                        type="button"
                        (click)="clearForm()"
                      >
                        <i class="bi bi-arrow-clockwise me-2"></i>Limpiar
                      </button>
                    </div>
                    <div class="col-md-6">
                      <button 
                        class="btn btn-primary w-100 py-2" 
                        type="submit"
                        [disabled]="!loginFormGroup.valid"
                      >
                        <i class="bi bi-person-plus me-2"></i>Registrarse
                      </button>
                    </div>
                  </div>
                </form>
              </main>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>